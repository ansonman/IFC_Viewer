<Window x:Class="IfcSchemaViewer.Views.IfcSchemaViewerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="clr-namespace:IfcSchemaViewer.ViewModels"
        mc:Ignorable="d"
        Title="IFC Schema Viewer" Height="600" Width="800"
        WindowStartupLocation="CenterOwner">
    <Window.Resources>
        <HierarchicalDataTemplate DataType="{x:Type vm:IfcSchemaNode}"
                                  ItemsSource="{Binding Children}">
            <StackPanel Orientation="Horizontal" Margin="2,1" ContextMenuOpening="Node_ContextMenuOpening">
                <TextBlock Text="{Binding Name}" FontWeight="SemiBold"/>
                <TextBlock Text=": " Margin="4,0"/>
                <TextBlock Text="{Binding Value}" TextWrapping="Wrap"/>
                <StackPanel.ContextMenu>
                    <ContextMenu DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}">
                        <MenuItem Header="複製名稱" Click="CopyName_Click" CommandParameter="{Binding}"/>
                        <MenuItem Header="複製值" Click="CopyValue_Click" CommandParameter="{Binding}"/>
                        <MenuItem Header="複製名稱=值" Click="CopyPair_Click" CommandParameter="{Binding}"/>
                    </ContextMenu>
                </StackPanel.ContextMenu>
            </StackPanel>
        </HierarchicalDataTemplate>
    </Window.Resources>
    <DockPanel>
        <StackPanel DockPanel.Dock="Top" Orientation="Horizontal" Margin="8,6">
            <TextBlock Text="搜尋:" VerticalAlignment="Center" Margin="0,0,6,0"/>
            <TextBox Width="260" Text="{Binding FilterText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
            <Button Content="清除" Margin="6,0,0,0" Padding="10,2" Click="ClearFilter_Click"/>
            <Separator Width="16"/>
            <Button Content="展開全部" Padding="10,2" Click="ExpandAll_Click"/>
            <Button Content="收合全部" Margin="6,0,0,0" Padding="10,2" Click="CollapseAll_Click"/>
        </StackPanel>
        <TextBlock DockPanel.Dock="Top" Text="雙擊或點選 3D 元件將在此顯示其 IFC Schema 詳細資訊" Margin="8,0,8,6" Foreground="Gray"/>
        <TreeView x:Name="Tree" ItemsSource="{Binding ViewNodes}" />
    </DockPanel>
</Window>
