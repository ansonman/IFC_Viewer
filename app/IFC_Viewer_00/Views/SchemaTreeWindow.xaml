<Window x:Class="IFC_Viewer_00.Views.SchemaTreeWindow"
		xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:vm="clr-namespace:IFC_Viewer_00.ViewModels"
		xmlns:m="clr-namespace:IFC_Viewer_00.Models"
		mc:Ignorable="d"
		Title="IFC Schema Viewer" Height="700" Width="900">
	<DockPanel>
		<!-- Toolbar -->
		<ToolBar DockPanel.Dock="Top">
			<Button Content="從目前選取重新整理" Command="{Binding RefreshFromSelectionCommand}" Margin="0,0,8,0"/>
			<Separator/>
			<TextBlock Text="MaxDepth:" VerticalAlignment="Center" Margin="8,0,4,0"/>
			<TextBox Width="40" Text="{Binding MaxDepth, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
			<CheckBox Content="選取變更自動刷新" IsChecked="{Binding AutoRefresh, Mode=TwoWay}" Margin="12,0,0,0"/>
			<Separator/>
			<TextBlock Text="目標：" VerticalAlignment="Center" Margin="12,0,4,0"/>
			<TextBlock Text="{Binding SelectedInfo}" VerticalAlignment="Center"/>
		</ToolBar>

		<!-- Body: Tree -->
		<Grid>
			<Grid.RowDefinitions>
				<RowDefinition Height="*"/>
				<RowDefinition Height="Auto"/>
			</Grid.RowDefinitions>

			<TreeView Grid.Row="0" ItemsSource="{Binding Root.Children}" Margin="6">
				<TreeView.Resources>
					<HierarchicalDataTemplate DataType="{x:Type m:SchemaNode}" ItemsSource="{Binding Children}">
						<Grid>
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="220"/>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="180"/>
							</Grid.ColumnDefinitions>
							<TextBlock Grid.Column="0" Text="{Binding PropertyName}"/>
							<TextBlock Grid.Column="1" Text="{Binding PropertyValue}" TextTrimming="CharacterEllipsis"/>
							<TextBlock Grid.Column="2" Text="{Binding PropertyType}" Foreground="#666" HorizontalAlignment="Right"/>
						</Grid>
					</HierarchicalDataTemplate>
				</TreeView.Resources>
			</TreeView>

			<StatusBar Grid.Row="1">
				<StatusBarItem>
					<TextBlock Text="{Binding Status}"/>
				</StatusBarItem>
			</StatusBar>
		</Grid>
	</DockPanel>
</Window>
